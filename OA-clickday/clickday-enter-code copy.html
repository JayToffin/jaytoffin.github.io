<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Click Day – Enter Your Code</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Rubik:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>

<header class="header">
  <div class="header-inner">
    <div class="brand-lockup">
      <div class="brand-clickday">
        <span>Click</span>
        <span>DAY</span>
      </div>
      <span class="brand-separator">×</span>
      <div class="brand-oa">Officine Allegra</div>
    </div>

    <div class="header-actions">
      <span>Click Day · Code Entry</span>
      <a href="clickday.html">Back to overview</a>
    </div>
  </div>
</header>

<main>
  <div class="page-container">
    <div class="code-layout">
      <!-- LEFT PANEL -->
      <div>
        <div class="eyebrow">Live event</div>
        <h1 class="page-title">Enter your unique code</h1>
        <p class="page-subtitle">
          This is the final step of Click Day. Enter your company&#8217;s unique code and confirm.
          The system will record your completion time.
        </p>

        <div class="hint-box">
          The email you received contains:
          <ul class="rules-list">
            <li>The link to this page.</li>
            <li>Your unique company code.</li>
            <li>A reminder of the month your code is valid for.</li>
          </ul>
        </div>

        <p style="font-size:0.85rem; color:#666; margin-top:1.2rem;">
          The winner is the first company to complete a valid submission.  
          Double-check that you are using the correct code and that you&#8217;re submitting within
          the active Click Day window.
        </p>
      </div>

      <!-- RIGHT PANEL: CODE CARD -->
      <div class="code-card-wrapper">
        <div class="code-card" id="code-card">
          <div class="code-card-header">
            <span>Click Day · Code validation</span>
            <span class="status-pill live" id="status-pill">Live</span>
          </div>

          <div class="code-label">Company code</div>
          <div class="code-input-row">
            <input
              id="code-input"
              type="text"
              class="code-input"
              placeholder="CD-XXXX-YYYY"
              autocomplete="off"
              autofocus
            />
            <button id="validate-btn" class="btn btn-primary" type="button">
              Validate
            </button>
          </div>

          <div class="code-meta">
            Enter exactly the code you received by email. Codes are case-insensitive,
            but spacing and dashes matter.
          </div>

          <div class="helper-line">
            Tip: keep this page ready before Click Day starts. When the email lands,
            paste your code and press <strong>Enter</strong> or click <strong>Validate</strong>.
          </div>

          <div class="state-message state--idle" id="state-message">
            <div class="state-icon"></div>
            <span id="state-text">
              Waiting for your code. This demo validates a single sample code:
              <code>CD-ALLEGRA-2025</code>.
            </span>
          </div>

          <div class="timestamp" id="timestamp" style="display:none;"></div>
        </div>
      </div>
    </div>
  </div>

  <footer id="closing" class="closing reveal pb-0">
      <div class="closing-grid">
        <div>
          <div class="closing-brand">
            CLICK DAY × OFFICINE ALLEGRA
          </div>
          <p style="margin-top:0; font-size:0.9rem;">
            Click Day is designed as a recurring ritual for the coffee industry: a moment
            where speed, precision, and passion come together.
          </p>
          <p style="font-size:0.9rem;">
            From carefully maintained registries to symbolic prizes, every detail reflects
            the shared values of Officine Allegra and the professionals who choose its
            machines.
          </p>
        </div>

        <div>
          <p style="margin-top:0; font-size:0.85rem;">
            For more information about Click Day or partnerships:
          </p>
          <p style="font-size:0.85rem;">
            Email: <a href="mailto:info@officineallegra.com" style="color:var(--oa-orange);">
              info@officineallegra.com
            </a><br/>
            Web: <a href="https://officineallegra.com" target="_blank" style="color:var(--oa-orange);">
              officineallegra.com
            </a>
          </p>

          <div class="tags">
            <span class="tag-pill">#officineallegra</span>
            <span class="tag-pill">#espressomachine</span>
            <span class="tag-pill">#coffeeculture</span>
            <span class="tag-pill">#clickday</span>
          </div>
        </div>
      </div>

      <div class="closing-footer">
        Officine Allegra S.r.l · Via G. Di Vittorio, 26 · 20090 Pantigliate (Milano) · Italy
      </div>
    </footer>
</main>



<script>
  (function () {
    var input = document.getElementById("code-input");
    var btn = document.getElementById("validate-btn");
    var stateEl = document.getElementById("state-message");
    var stateText = document.getElementById("state-text");
    var tsEl = document.getElementById("timestamp");
    var statusPill = document.getElementById("status-pill");

    var DEMO_CODE = "CD-ALLEGRA-2025";

    function setState(type, message) {
      stateEl.classList.remove(
        "state--idle",
        "state--validating",
        "state--success",
        "state--error"
      );
      stateEl.classList.add("state--" + type);
      stateText.innerHTML = message;
    }

    function formatTime(date) {
      var hh = String(date.getHours()).padStart(2, "0");
      var mm = String(date.getMinutes()).padStart(2, "0");
      var ss = String(date.getSeconds()).padStart(2, "0");
      return hh + ":" + mm + ":" + ss;
    }

    function handleValidate() {
      var code = (input.value || "").trim().toUpperCase();
      if (!code) {
        setState("error", "Please enter the code you received in the email.");
        tsEl.style.display = "none";
        return;
      }

      // START VALIDATING
      setState("validating", "Validating your code, please wait…");
      btn.disabled = true;
      input.disabled = true;
      statusPill.textContent = "Checking…";

      // Simulate network delay (demo)
      setTimeout(function () {
        var now = new Date();
        var timeStr = formatTime(now);

        if (code === DEMO_CODE) {
          setState(
            "success",
            "Your code is valid. (Demo) Your completion has been recorded at local time: <strong>" +
              timeStr +
              "</strong>."
          );
          tsEl.textContent =
            "Demo only: in the real system, this timestamp is stored server-side with millisecond precision.";
          tsEl.style.display = "block";
          statusPill.textContent = "Success";
        } else {
          setState(
            "error",
            "The code you entered is not valid for this demo. Try using <code>CD-ALLEGRA-2025</code>."
          );
          tsEl.style.display = "none";
          statusPill.textContent = "Live";
        }

        btn.disabled = false;
        input.disabled = false;
        input.focus();
        input.select();
      }, 800);
    }

    btn.addEventListener("click", handleValidate);
    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        e.preventDefault();
        handleValidate();
      }
    });
  })();
</script>

</body>
</html>
